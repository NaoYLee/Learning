# 数据仓库 Data Warehouse

数仓是面向分析的集成化数据平台。  
从各种数据来源收集数据，通过数仓进行数据加工分析，分析结果为企业提供决策依据

- 满足企业数据的统一化存储
  - 通过ETL将多远数据集成到统一平台，形成全局视图
  - 存储多年历史数据，支持历史数据分析
- 通过规范化的数据处理来实现企业的数据分析应用
  - 通过清洗和和标准化，统一业务口径
  - 应对复杂分析需求，支持建立模型，提供高质量数据
- 避免数据库中进行分析影响性能，干扰业务开展
  - OLAP针对分析场景优化，支持快速聚合和大规模数据查询，避免干扰生产系统

|  | `OLTP`联机事务处理**On-Line Transaction Processing** | `OLAP`联机分析处理**On-Line Analysis Processing** |
| - | - | - |
| 用户 | 业务操作人员 | 数据分析师、业务分析师、决策人员 |
| 目的 | 操作处理，支持基本业务运行 | 发现和分析问题，支持决策 |
| 特点 | 处理大量的小业务 | 使用复杂查询处理大量数据 |
| 数据内容 | 当前的、最新的业务数据 | 历史的、聚合的、统一的多维数据 |
| 数据操作 | 频繁增改删 | 很少改和删，以读为主 |
| 查询类型 | 简单的、标准化的查询 | 复杂查询 |

## 数仓的基本架构

### 数仓的层级设计

#### ODS层

数据操作存储层  
**Operational Data Store**  
集成多来源的数据，使用分区表进行临时存储

设计原则：

- 保持与源系统相同的数据结构
- 记录完整的历史数据
- 在源表基础上添加ETL控制字段

| 字段名 | 描述 |
| - | - |
| ETL_CREATE_TIME | 数据入库时间 |
| ETL_UPDATE_TIME | 数据更新时间 |
| ETL_BATCH_NO | 数据批次号 |
| SOURCE_SYSTEM | 数据源系统 |
| IS_DELETE | 逻辑删除 |

数据质量校验：

- 验证数据总数
- 验证边界值
- 验证关键字段

#### DWD层

数据仓库明细层  
**Data Warehouse Detail**  
将ODS层数据进行清洗转换，保证数据质量  
区分事实与维度，为建模做准备

**事实**：  
业务过程中产生的、未经过加工处理的数据

**维度**：  
分析的角度，用于描述并细化指标

设计原则：

- 数据清洗和标准化
  - 去空
  - 统一数据格式
  - 统一数据单位及位数
  - 脱敏、加密
- 建立关联关系
- 建立一致性维度
- 数据以最细粒度进行存储

数据质量：

- 完整性
- 准确性
- 唯一性
- 时效性

#### DWS层

数据仓库汇总层  
**Data Warehouse Summary**  
面向主题构建宽表，将所有相关数据统一收集

设计原则：

- 按业务需求进行整合
- 记提供常用指标
- 优化查询性能

#### ADS层

应用数据服务层  
**Application Data Service**  
按照业务主题进行数据汇总，为分析报表提供数据支撑

设计原则：

- 面向特定业务应用
- 提供直接查询接口
- 数据展示友好

![Static Badge](https://img.shields.io/badge/TO_BE-COUTINUE-yellow)
